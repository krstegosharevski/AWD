<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script>
    /*
     You are given an array of objects representing a collection of products, each with a name, price, and category.
     Your task is to use map, filter, and reduce to calculate the average price of products in each category,
     and then return an array of objects containing only the categories that have an average price above 50.

     Input:
     const products = [
          { name: "Product 1", price: 20, category: "Electronics" },
          { name: "Product 2", price: 30, category: "Clothes" },
          { name: "Product 3", price: 40, category: "Electronics" },
          { name: "Product 4", price: 50, category: "Clothes" },
          { name: "Product 5", price: 60, category: "Clothes" },
          { name: "Product 6", price: 70, category: "Electronics" },
          { name: "Product 7", price: 80, category: "Clothes" },
          { name: "Product 8", price: 90, category: "Electronics" },
    ];

    Output:
    [
      { category: 'Clothes', average: 55 },
      { category: 'Electronics', average: 55 }
    ]
     */

    //Given array:
    const products = [
        { name: "Product 1", price: 20, category: "Electronics" },
        { name: "Product 2", price: 30, category: "Clothes" },
        { name: "Product 3", price: 40, category: "Electronics" },
        { name: "Product 4", price: 50, category: "Clothes" },
        { name: "Product 5", price: 60, category: "Clothes" },
        { name: "Product 6", price: 70, category: "Electronics" },
        { name: "Product 7", price: 80, category: "Clothes" },
        { name: "Product 8", price: 90, category: "Electronics" },
        { name: "Product 9", price: 20, category: "XO" },
    ];


    //Your code:
    let productsByCategory = products.reduce((res_obj,tekoven_objekt) => {
        const category = tekoven_objekt.category;
        if (!res_obj[category]){
            res_obj[category] = [];
        }
        res_obj[category].push(tekoven_objekt);
        return res_obj;
    },{})
    console.log(productsByCategory); //Test case 1/3 [45p]

    //Your code:
    let avgPriceByCategory = Object.keys(productsByCategory).map(category => {
        const sum = productsByCategory[category].reduce((vkupna,obj) => {
           return vkupna+obj.price;
        },0)
        return {category: category, average: sum/productsByCategory[category].length}
    })
    console.log(avgPriceByCategory) //Test case 2/3 [40p]

    //Your code:
    let filtered = avgPriceByCategory.filter(obj => obj.average>50);
    console.log(filtered) //Test case 3/3 [15p]


//The solution:
/*
    //console.log(productsByCategory);
    const productsByCategory = products.reduce((obj,product) =>{
        const category = product.category;
        if (!obj[category]){
            obj[category] = []
        }
        obj[category].push(product);
        return obj;
    }, {})
   // console.log(productsByCategory); //Test case 1/3


    let avgPriceByCategory = Object.keys(productsByCategory).map(category =>{
        const sum = productsByCategory[category].reduce((sum,cate) => {
           return sum + cate.price;
        },0)
        return {category: category, average: sum/productsByCategory[category].length}
    })
    //console.log(avgPriceByCategory) //Test case 2/3


    const highPricedCategories = avgPriceByCategory.filter(category => category.average>50);
    console.log(highPricedCategories); //Test case 3/3*/

</script>
</body>
</html>